shortCut: w
description: Open PowerShell terminal
scopes:
  - pods
  - containers
command: bash
background: false
args:
  - -c
  - >
    SHELL_CHOICE=$(whiptail --title "Select Shell" --menu "Choose a shell to start:" 15 60 2
    "pwsh" "PowerShell (pwsh)"
    "powershell" "Windows PowerShell (powershell)"
    3>&1 1>&2 2>&3);

    EXIT_STATUS=$?;
    if [ $EXIT_STATUS -ne 0 ]; then
      echo "Shell selection cancelled.";
      exit 0;
    fi;

    if [ -n "$POD" ]; then
      pod=$POD;
      if [ -n "$CONTAINER" ]; then
        container="--container $CONTAINER";
      fi;
    else
      pod=$NAME;
    fi;

    kubectl
    exec
    $pod
    --context $CONTEXT
    $container
    --kubeconfig $KUBECONFIG
    --namespace $NAMESPACE
    --stdin=true
    --tty=true
    --
    $SHELL_CHOICE
